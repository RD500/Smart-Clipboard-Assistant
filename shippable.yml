archive: true
language: java
jdk:
    - oraclejdk8

build:
  pre_ci_boot:
    image_name: menny/android_ndk
    image_tag: latest
    pull: true
  ci:
    - mkdir -p shippable/testresults
    - mkdir -p shippable/codecoverage
    - ./gradlew clean unitTestDebug checkDebug jacocoTestReport
    - cp -r build/test-results/* shippable/testresults/
    - cp -r build/jacoco/* shippable/codecoverage/
    - cp -r build/reports/jacoco/jacocoTestReport/* shippable/codecoverage/
    - cp build/outputs/apk/* shippable/
    - ./gradlew clean assembleCanary publishCanary
    - cp build/outputs/apk/* shippable/
    - ./gradlew clean assembleRelease
    - cp build/outputs/apk/* shippable/
integrations:
    notifications:
        - integrationName: email
          type: email
          recipients:
            - mennyed@gmail.com
          on_success: always
          on_failure: always
